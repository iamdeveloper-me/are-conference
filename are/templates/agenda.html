{% extends "layout/base.html" %}
{% load static %}
{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/agenda.css' %}">
{% endblock extra_css %}
{% block content %}
<!-- agenda banner start-->
<section class="agenda_banner">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="agenda_banner_text">
                    <h1>Action for Restoring Environment - <span>ARE we taking enough actions?</span></h1>
                    <a href="#add_conference" class="trigger-btn nav-item nav-link" data-toggle="modal">Add Conference</a>
                    <h3>{{ conf.title }}</h3>
                    <h4>Tentative Agenda {{ conf.startdate }}-{{ conf.enddate }}</h4>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- agenda banner close-->
<!--Popup for Add Agenda Start-->
{% if conf %}
<a href="#add_session" class="trigger-btn nav-item nav-link" data-toggle="modal">Add Agenda</a>
{% endif %}
<!-- dynamic table section start -->
<section class="table_section">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                {% for key,value in agenda.items %}
                <div class="table_main_box">
                    <h4>Day {{ key }} | {{ value.date }}</h4>
                    <table class="table table-bordered custom_table">
                        <thead class="head_top">
                            <tr>
                                <th class="session_width">session</th>
                                <th class="session_2">Time</th>
                                <th class="session_2">Duration</th>
                                <th scope="col">Event</th>
                                <th scope="col">speakers</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for object in value.data %}
                            {% if object.session == None %}
                            <tr class="green_bg">
                                <td>{{ object.session }}</td>
                                <td>{{ object.starttime }} to {{ object.endtime }}</td>
                                <td>{{ object.duration }}</td>
                                <td>{{ object.event }}</td>
                                <td> unknown</td>
                            </tr>
                            {% else %}
                            <tr class="light-pink">
                                <td>{{ object.session }}</td>
                                <td>{{ object.starttime }} to {{ object.endtime }}</td>
                                <td>{{ object.duration }}</td>
                                <td>{{ object.event }}</td>
                                <td>unknown</td>
                            </tr>
                            {% endif %}
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
</section>
<script type="text/javascript">
function getDayName(dateStr, locale) {
    var date = new Date(dateStr);
    return date.toLocaleDateString(locale, { weekday: 'long' });
}

var dateStr = `{{object.date|date:"Y-m-d"}}`;
day = dateStr;
var day = getDayName(dateStr, "nl-NL");
</script>
<!-- end dynamic table section -->
{% endblock content %}
{% block extra_content %}
{% include 'add_agenda_popup.html' %}
{% include 'add_conference_popup.html' %}
{% endblock extra_content %}